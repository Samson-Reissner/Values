<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up - Value</title>
    <link rel="stylesheet" href="styles/custom.css">
</head>
<body class="wizard-page">
    <div class="wizard-container">
        <div class="wizard-header">
            <button class="back-btn" onclick="window.location.href='auth-landing.html'">
                <i class="fas fa-arrow-left"></i>
            </button>
            
            <div class="header-content">
                <div class="logo">
                    <a href="index.html" class="logo">
                        <!-- REPLACE: Logo image -->
                        <img src="images/Value-logo.png" alt="Value Financial Services" class="logo-image">
                    </a>
                </div>
                <h1>Create Your Account</h1>
                <p>Complete the registration in just a few steps</p>
            </div>
            
            <div class="progress-steps">
                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <div class="step-label">Basic Info</div>
                </div>
                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <div class="step-label">User Type</div>
                </div>
                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <div class="step-label">Documents</div>
                </div>
            </div>
        </div>
        
        <div class="wizard-content">
            <!-- Step 1: Basic Information -->
            <div class="step-content active" id="step1">
                <h2 class="step-title">Personal Information</h2>
                <form id="basicInfoForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName" class="required">First Name</label>
                            <input type="text" id="firstName" name="firstName" required>
                        </div>
                        <div class="form-group">
                            <label for="lastName" class="required">Last Name</label>
                            <input type="text" id="lastName" name="lastName" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="email" class="required">Email Address</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="dob" class="required">Date of Birth</label>
                            <input type="date" id="dob" name="dob" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="age" class="required">Age</label>
                        <input type="number" id="age" name="age" min="18" max="100" required>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="password" class="required">Password</label>
                            <input type="password" id="password" name="password" required>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword" class="required">Confirm Password</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required>
                        </div>
                    </div>
                </form>
            </div>
            
            <!-- Step 2: User Type Selection -->
            <div class="step-content" id="step2">
                <h2 class="step-title">Select Your Category</h2>
                <p style="color: #64748b; margin-bottom: 25px;">Choose the category that best describes you. This helps us provide you with the right loan options.</p>
                
                <div class="user-type-options">
                    <div class="user-type-card" data-type="civil-servant">
                        <i class="fas fa-user-tie user-type-icon"></i>
                        <h4>Civil Servant</h4>
                        <p>Government employee</p>
                    </div>
                    
                    <div class="user-type-card" data-type="business">
                        <i class="fas fa-briefcase user-type-icon"></i>
                        <h4>Business Person</h4>
                        <p>Entrepreneur or business owner</p>
                    </div>
                    
                    <div class="user-type-card" data-type="private">
                        <i class="fas fa-building user-type-icon"></i>
                        <h4>Private Employee</h4>
                        <p>Private sector worker</p>
                    </div>
                    
                    <div class="user-type-card" data-type="farmer">
                        <i class="fas fa-tractor user-type-icon"></i>
                        <h4>Farmer</h4>
                        <p>Agricultural activities</p>
                    </div>
                    
                    <div class="user-type-card" data-type="student">
                        <i class="fas fa-graduation-cap user-type-icon"></i>
                        <h4>Student</h4>
                        <p>Currently studying</p>
                    </div>
                    
                    <div class="user-type-card" data-type="other">
                        <i class="fas fa-user user-type-icon"></i>
                        <h4>Other</h4>
                        <p>Other occupation</p>
                    </div>
                </div>
                
                <input type="hidden" id="userType" name="userType">
            </div>
            
            <!-- Step 3: Document Upload -->
            <div class="step-content" id="step3">
                <h2 class="step-title">Submit Required Documents</h2>
                <p style="color: #64748b; margin-bottom: 25px;">Please provide the necessary documents for verification.</p>
                
                <form id="documentForm">
                    <div class="form-group">
                        <label for="payslip" class="required">Payslip (Last 3 months)</label>
                        <input type="file" id="payslip" name="payslip" accept=".pdf,.jpg,.png" required>
                        <p class="optional-note">Upload scanned copies or clear photos</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="bankStatement" class="required">Bank Statement (Last 6 months)</label>
                        <input type="file" id="bankStatement" name="bankStatement" accept=".pdf,.jpg,.png" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="businessNumber">Business Registration Number</label>
                        <input type="text" id="businessNumber" name="businessNumber" placeholder="Enter if you're a business person">
                        <p class="optional-note">Only for business persons</p>
                    </div>
                    
                    <div class="form-group">
                        <label for="employeeNumber">Employee Number</label>
                        <input type="text" id="employeeNumber" name="employeeNumber" placeholder="If you're a civil servant, enter employee number">
                        <p class="optional-note">Civil servants only. Others can skip this field.</p>
                    </div>
                </form>
                
                <!-- Warning for non-civil servants -->
                <div class="warning-box" id="nonCivilWarning">
                    <h4><i class="fas fa-exclamation-triangle"></i> Visit Our Office</h4>
                    <p>Since you are not a civil servant, you need to visit any Value Loans office to complete your registration. Our staff will guide you through the remaining steps.</p>
                    
                    <div class="office-contact">
                        <h4>Need Assistance?</h4>
                        <p>Contact our customer service for directions to the nearest office.</p>
                        <button class="contact-btn" onclick="contactSupport()">
                            <i class="fas fa-phone-alt"></i> Contact Support
                        </button>
                    </div>
                </div>
                
                <!-- Success message for civil servants -->
                <div class="warning-box" id="civilSuccess" style="background: #d1fae5; border-color: #10b981; display: none;">
                    <h4 style="color: #065f46;"><i class="fas fa-check-circle"></i> Complete Registration</h4>
                    <p style="color: #065f46;">You can complete your registration online. Please review your information and submit.</p>
                </div>
            </div>
        </div>
        
        <div class="wizard-footer">
            <button class="btn btn-prev hidden" id="prevBtn">
                <i class="fas fa-arrow-left"></i> Previous
            </button>
            
            <div style="margin-left: auto;">
                <button class="btn btn-next" id="nextBtn">
                    Next <i class="fas fa-arrow-right"></i>
                </button>
                
                <button class="btn btn-submit hidden" id="submitBtn">
                    <i class="fas fa-check"></i> Submit Registration
                </button>
            </div>
        </div>
    </div>

    <script>
        // Wizard navigation
        let currentStep = 1;
        const totalSteps = 3;
        let selectedUserType = '';
        
        // DOM Elements
        const stepElements = document.querySelectorAll('.step');
        const stepContentElements = document.querySelectorAll('.step-content');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const submitBtn = document.getElementById('submitBtn');
        const userTypeCards = document.querySelectorAll('.user-type-card');
        const userTypeInput = document.getElementById('userType');
        const employeeNumberInput = document.getElementById('employeeNumber');
        const nonCivilWarning = document.getElementById('nonCivilWarning');
        const civilSuccess = document.getElementById('civilSuccess');
        
        // Initialize
        updateStepDisplay();
        
        // User type selection
        userTypeCards.forEach(card => {
            card.addEventListener('click', () => {
                // Remove selected class from all cards
                userTypeCards.forEach(c => c.classList.remove('selected'));
                
                // Add selected class to clicked card
                card.classList.add('selected');
                
                // Store selected type
                selectedUserType = card.getAttribute('data-type');
                userTypeInput.value = selectedUserType;
                
                // If user is on step 3, check employee number
                if (currentStep === 3) {
                    checkEmployeeNumber();
                }
            });
        });
        
        // Employee number input event
        employeeNumberInput.addEventListener('input', checkEmployeeNumber);
        
        function checkEmployeeNumber() {
            const empNumber = employeeNumberInput.value.trim();
            
            if (selectedUserType === 'civil-servant' && empNumber !== '') {
                // Civil servant with employee number - can complete online
                nonCivilWarning.style.display = 'none';
                civilSuccess.style.display = 'block';
                submitBtn.classList.remove('hidden');
                submitBtn.disabled = false;
            } else if (selectedUserType === 'civil-servant' && empNumber === '') {
                // Civil servant but no employee number
                nonCivilWarning.style.display = 'block';
                civilSuccess.style.display = 'none';
                submitBtn.classList.add('hidden');
            } else if (selectedUserType !== 'civil-servant') {
                // Non-civil servant
                nonCivilWarning.style.display = 'block';
                civilSuccess.style.display = 'none';
                submitBtn.classList.add('hidden');
            }
        }
        
        // Next button click
        nextBtn.addEventListener('click', () => {
            if (validateCurrentStep()) {
                if (currentStep < totalSteps) {
                    currentStep++;
                    updateStepDisplay();
                    
                    // If moving to step 3, check employee number
                    if (currentStep === 3) {
                        checkEmployeeNumber();
                    }
                }
            }
        });
        
        // Previous button click
        prevBtn.addEventListener('click', () => {
            if (currentStep > 1) {
                currentStep--;
                updateStepDisplay();
            }
        });
        
        // Submit button click
        submitBtn.addEventListener('click', (e) => {
            e.preventDefault();
            
            if (validateCurrentStep()) {
                // Only civil servants with employee number can submit
                if (selectedUserType === 'civil-servant' && employeeNumberInput.value.trim() !== '') {
                    submitRegistration();
                } else {
                    alert('Please visit our office to complete registration.');
                }
            }
        });
        
        function updateStepDisplay() {
            // Update step indicators
            stepElements.forEach(step => {
                const stepNum = parseInt(step.getAttribute('data-step'));
                if (stepNum === currentStep) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
            
            // Update step content
            stepContentElements.forEach(content => {
                if (content.id === `step${currentStep}`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            // Update button visibility
            prevBtn.classList.toggle('hidden', currentStep === 1);
            
            if (currentStep === totalSteps) {
                nextBtn.classList.add('hidden');
                
                // Show submit button only for civil servants with employee number
                if (selectedUserType === 'civil-servant' && employeeNumberInput.value.trim() !== '') {
                    submitBtn.classList.remove('hidden');
                } else {
                    submitBtn.classList.add('hidden');
                }
            } else {
                nextBtn.classList.remove('hidden');
                submitBtn.classList.add('hidden');
            }
        }
        
        function validateCurrentStep() {
            if (currentStep === 1) {
                return validateStep1();
            } else if (currentStep === 2) {
                return validateStep2();
            } else if (currentStep === 3) {
                return validateStep3();
            }
            return true;
        }
        
        function validateStep1() {
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const dob = document.getElementById('dob').value;
            const age = document.getElementById('age').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            
            if (!firstName || !lastName || !email || !dob || !age || !password || !confirmPassword) {
                alert('Please fill in all required fields.');
                return false;
            }
            
            if (password !== confirmPassword) {
                alert('Passwords do not match.');
                return false;
            }
            
            if (password.length < 6) {
                alert('Password must be at least 6 characters long.');
                return false;
            }
            
            if (parseInt(age) < 18) {
                alert('You must be at least 18 years old to register.');
                return false;
            }
            
            return true;
        }
        
        function validateStep2() {
            if (!selectedUserType) {
                alert('Please select your user category.');
                return false;
            }
            return true;
        }
        
        function validateStep3() {
            const payslip = document.getElementById('payslip').files.length;
            const bankStatement = document.getElementById('bankStatement').files.length;
            
            if (!payslip || !bankStatement) {
                alert('Please upload both payslip and bank statement.');
                return false;
            }
            
            return true;
        }
        
        function submitRegistration() {
            // Collect all form data
            const formData = {
                firstName: document.getElementById('firstName').value.trim(),
                lastName: document.getElementById('lastName').value.trim(),
                email: document.getElementById('email').value.trim(),
                dob: document.getElementById('dob').value,
                age: document.getElementById('age').value,
                userType: selectedUserType,
                businessNumber: document.getElementById('businessNumber').value.trim(),
                employeeNumber: employeeNumberInput.value.trim(),
                payslip: document.getElementById('payslip').files[0]?.name || '',
                bankStatement: document.getElementById('bankStatement').files[0]?.name || ''
            };
            
            // In a real app, you would send this to a server
            console.log('Registration data:', formData);
            
            // Show success message
            alert('Registration submitted successfully! A confirmation email has been sent.');
            
            // Redirect to login or dashboard
            setTimeout(() => {
                window.location.href = 'login.html';
            }, 2000);
        }
        
        function contactSupport() {
            alert('Call our support at: +1 (555) 123-4567\nEmail: support@valueloans.com\nWe will guide you to the nearest office.');
        }
        
        // Auto-calculate age from date of birth
        document.getElementById('dob').addEventListener('change', function() {
            const dob = new Date(this.value);
            const today = new Date();
            let age = today.getFullYear() - dob.getFullYear();
            const monthDiff = today.getMonth() - dob.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < dob.getDate())) {
                age--;
            }
            
            document.getElementById('age').value = age;
        });
    </script>
</body>
</html>